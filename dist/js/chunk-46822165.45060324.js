(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46822165"],{"57f9":function(e,t,r){"use strict";var i=r("eb4f"),n=r.n(i);n.a},9122:function(e,t,r){},cf83:function(e,t,r){"use strict";var i=r("9122"),n=r.n(i);n.a},dc02:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-row",[r("b-col",{attrs:{cols:"12",xl:"8"}},[e.serverError?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("Server Error!")]):e._e(),r("b-modal",{ref:"userModel",attrs:{id:"userModel",title:e.userModelTitle},on:{hidden:e.resetModal,ok:e.handleOk}},[r("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[r("b-form-group",{attrs:{label:"Name","label-for":"name-input"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"}],attrs:{name:"name-input",id:"name-input",state:e.validateState("name-input"),"aria-describedby":"name-input-feedback"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),r("b-form-invalid-feedback",{attrs:{id:"name-input-feedback"}},[e._v("This is a required field")])],1),r("b-form-group",{attrs:{label:"Unit","label-for":"unit-input"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"}],attrs:{id:"unit-input",name:"unit-input",state:e.validateState("unit-input"),"aria-describedby":"unit-input-feedback"},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}}),r("b-form-invalid-feedback",{attrs:{id:"unit-input-feedback"}},[e._v("This is a required field")])],1),r("b-form-group",{attrs:{label:"Role","label-for":"role-input"}},[r("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"}],attrs:{id:"role-input",options:e.roles,name:"role-input",state:e.validateState("role-input"),"aria-describedby":"role-input-feedback"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}}),r("b-form-invalid-feedback",{attrs:{id:"input-2-live-feedback"}},[e._v("\n        This is a required field.\n      ")])],1)],1)])],1)],1),r("b-row",[r("b-col",{attrs:{cols:"12",xl:"8"}},[r("transition",{attrs:{name:"slide"}},[r("b-card",[r("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n            User List\n            "),r("div",{staticClass:"card-header-actions"},[r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:e.addRow}},[e._v("New")])],1)]),r("b-table",{attrs:{"show-empty":"",hover:e.hover,striped:e.striped,bordered:e.bordered,small:e.small,fixed:e.fixed,responsive:"sm",items:e.items,fields:e.fields},on:{"row-clicked":e.rowClicked},scopedSlots:e._u([{key:"userid",fn:function(t){return[r("strong",[e._v(e._s(t.item.userid))])]}},{key:"name",fn:function(t){return[r("strong",[e._v(e._s(t.item.name))])]}},{key:"actions",fn:function(t){return[r("span",{staticStyle:{display:"block",width:"100px"}},[r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(r){return e.editRow(t.item)}}},[e._v("Edit")]),r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(r){return e.deleteRow(t.item.id)}}},[e._v("Delete")])],1)]}}])}),r("nav",[r("b-pagination",{attrs:{size:"sm","total-rows":e.totalRows,"per-page":e.perPage,"prev-text":"Prev","next-text":"Next","hide-goto-end-buttons":""},on:{input:function(t){return e.fetchClass("make")}},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)],1)],1)],1)},n=[],a=(r("7f7f"),r("6b54"),r("f751"),r("b3ff")),s={name:"Users",props:{caption:{type:String,default:"Users"},hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!1},small:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1}},data:function(){return{items:[],serverError:!1,nameState:null,userModelTitle:"",roles:[{text:"Select One",value:null},"User","Admin"],fields:[{key:"id",label:" ID"},{key:"name"},{key:"role"},{key:"unit"},{key:"actions"}],currentPage:1,perPage:0,totalRows:0,form:{name:"",role:"",unit:""}}},computed:{},mounted:function(){},created:function(){this.fetchClass("init")},methods:{validateState:function(e){return this.veeFields[e]&&(this.veeFields[e].dirty||this.veeFields[e].validated)?!this.veeErrors.has(e):null},handleOk:function(e){e.preventDefault(),this.handleSubmit()},handleSubmit:function(){var e=this;this.$validator.validateAll().then(function(t){if(t){if(null==e.form.id){var r=Object.assign({},e.form);delete r["id"],(new a["a"]).create(r).then(function(t){"success"==t.server?e.fetchClass():e.serverError=!0})}else{var i=[];i.push(e.form),(new a["a"]).update(i).then(function(t){"success"==t.server?e.fetchClass():e.serverError=!0})}e.$nextTick(function(){e.$refs["userModel"].hide()})}})},resetModal:function(){this.form.name="",this.form.role=null,this.form.unit="",this.form.id=null},deleteRow:function(e){var t=this;(new a["a"]).delete(e).then(function(e){"success"==e.server?t.fetchClass():t.serverError=!0})},addRow:function(){this.resetModal(),this.$refs["userModel"].show(),this.userModelTitle="Add User"},editRow:function(e){this.userModelTitle="Edit User",this.$refs["userModel"].show(),this.form.name=e.name.toString(),this.form.unit=e.unit.toString(),this.form.role=e.role.toString(),this.form.id=e.id.toString()},fetchClass:function(e){var t=this;(new a["a"]).list(this.currentPage-1).then(function(r){t.items=r.content,"init"==e&&(t.totalRows=r.totalElements,t.perPage=r.pageable.pageSize)}).catch(function(e){console.log("Request failed...")})},userLink:function(e){return"users/".concat(e.toString())},rowClicked:function(e){var t=this.userLink(e.id);this.$router.push({path:t})}}},o=s,l=(r("cf83"),r("57f9"),r("2877")),u=Object(l["a"])(o,i,n,!1,null,"4eab7784",null);t["default"]=u.exports},eb4f:function(e,t,r){}}]);
//# sourceMappingURL=chunk-46822165.45060324.js.map